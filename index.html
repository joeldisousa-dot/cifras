<div id="versiculo" class="tab-content">
  <h2>üìñ Cap√≠tulo do Dia</h2>
  <p id="versiculoTexto">Carregando...</p>

  <!-- Controles de leitura -->
  <div style="text-align: center; margin-top: 20px;">
    <label for="velocidade">Velocidade:</label>
    <select id="velocidade">
      <option value="0.8">Lento</option>
      <option value="1" selected>Normal</option>
      <option value="1.5">R√°pido</option>
      <option value="2">Muito r√°pido</option>
    </select>
    <br><br>
    <button onclick="lerTexto()">üîä Ler em voz alta</button>
    <button onclick="pararLeitura()">‚èπÔ∏è Parar</button>
  </div>
</div>

<script>
  function openTab(tabId, event) {
    document.querySelectorAll('.tab-content').forEach(tab => tab.classList.remove('active'));
    document.querySelectorAll('.tab-button').forEach(btn => btn.classList.remove('active'));
    document.getElementById(tabId).classList.add('active');
    event.target.classList.add('active');
  }

  // Carregar Biblia.txt e mostrar vers√≠culo do dia
  async function carregarVersiculo() {
    try {
      let response = await fetch("Biblia.txt");
      let texto = await response.text();
      let versiculos = texto.split("\n").filter(l => l.trim() !== "");

      // usar dia do ano como √≠ndice fixo ‚Üí sempre o mesmo vers√≠culo no mesmo dia
      let hoje = new Date();
      let diaAno = Math.floor(
        (hoje - new Date(hoje.getFullYear(), 0, 0)) / 1000 / 60 / 60 / 24
      );
      let index = diaAno % versiculos.length;

      document.getElementById("versiculoTexto").textContent = versiculos[index];
    } catch (e) {
      document.getElementById("versiculoTexto").textContent =
        "Erro ao carregar o vers√≠culo.";
    }
  }

  carregarVersiculo();

  // ---------- Leitura em voz ----------
  let sintetizador = window.speechSynthesis;
  let falaAtual;

  function lerTexto() {
    pararLeitura(); // para caso j√° esteja lendo

    let texto = document.getElementById("versiculoTexto").textContent;
    let velocidade = parseFloat(document.getElementById("velocidade").value);

    falaAtual = new SpeechSynthesisUtterance(texto);
    falaAtual.lang = "pt-BR";  // voz em portugu√™s
    falaAtual.rate = velocidade; // controla a velocidade

    sintetizador.speak(falaAtual);
  }

  function pararLeitura() {
    if (sintetizador.speaking) {
      sintetizador.cancel();
    }
  }
</script>
